<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Tour & Business in China - Professional Ground Services</title>
    <meta name="description" content="Professional ground services for international visitors to China. Offering tour guides, exhibition support, and customized travel solutions across major cities." />
    <!-- Cloudflare optimization -->
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="robots" content="index, follow" />
    <link rel="canonical" href="https://www.tourbusinessinchina.com/" />
    <!-- 内联Font Awesome核心样式，减少外部依赖 -->
    <style>
      :root {
        --fa-style-family-classic: 'Font Awesome 6 Free';
        --fa-font-solid: normal 900 1em/1 'Font Awesome 6 Free';
        --fa-font-regular: normal 400 1em/1 'Font Awesome 6 Free';
      }
      .fa-solid {
        font-family: var(--fa-style-family-classic);
        font-weight: 900;
        -webkit-font-smoothing: antialiased;
        display: inline-block;
        font-style: normal;
        font-variant: normal;
        text-rendering: auto;
        line-height: 1;
      }
      .fa-brands {
        font-family: 'Font Awesome 6 Brands';
        font-weight: 400;
        -webkit-font-smoothing: antialiased;
        display: inline-block;
        font-style: normal;
        font-variant: normal;
        text-rendering: auto;
        line-height: 1;
      }
    </style>
    <script>
      // 简单的预加载检查，确保在加载应用前有更好的用户体验
      window.addEventListener('DOMContentLoaded', () => {
        document.body.classList.add('loaded');
      });
    </script>
  </head>
  <body class="bg-gray-50">
    <!-- 预加载屏幕 -->
    <div id="preloader" style="
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background-color: white;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      z-index: 9999;
      transition: opacity 0.5s ease;
    ">
      <div style="
        width: 50px;
        height: 50px;
        border: 3px solid #f3f3f3;
        border-top: 3px solid #dc2626;
        border-radius: 50%;
        animation: spin 1s linear infinite;
        margin-bottom: 20px;
      "></div>
      <div style="font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; font-weight: 600; color: #1e293b;">
        Loading...
      </div>
    </div>
    
    <script>
      // 预加载动画
      function fadeOut(el) {
        el.style.opacity = '1';
        (function fade() {
          if ((el.style.opacity -= 0.1) < 0) {
            el.style.display = 'none';
          } else {
            requestAnimationFrame(fade);
          }
        })();
      }
      
      // 简单的网络检查
      function checkNetwork() {
        return new Promise((resolve) => {
          const img = new Image();
          img.onload = function() {
            resolve(true);
          };
          img.onerror = function() {
            resolve(false);
          };
          img.src = 'data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7';
        });
      }
      
      // 应用启动逻辑
      async function initApp() {
        try {
          // 检查网络连接
          const isConnected = await checkNetwork();
          if (!isConnected) {
            console.warn('Network connection might be limited');
          }
          
          // 等待一小段时间确保DOM完全加载
          setTimeout(() => {
            const preloader = document.getElementById('preloader');
            if (preloader) {
              fadeOut(preloader);
            }
          }, 500);
        } catch (error) {
          console.error('Initialization error:', error);
          // 即使出错也继续，避免完全阻止应用启动
          const preloader = document.getElementById('preloader');
          if (preloader) {
            preloader.innerHTML = `
              <div style="text-align: center;">
                <div style="font-size: 3rem; margin-bottom: 1rem;">⚠️</div>
                <p style="font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; margin-bottom: 1rem;">
                  There was a loading issue
                </p>
                <button onclick="location.reload()" style="
                  padding: 0.5rem 1rem;
                  background-color: #dc2626;
                  color: white;
                  border: none;
                  border-radius: 9999px;
                  cursor: pointer;
                ">
                  Retry
                </button>
              </div>
            `;
          }
        }
      }
      
      // 启动应用初始化
      initApp();
    </script>
    
    <div id="root"></div>
    <script type="module" src="/src/main.tsx"></script>
    
    <!-- 确保即使主应用加载失败也能显示基本内容 -->
    <noscript>
      <div style="
        width: 100%;
        min-height: 100vh;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        background-color: #f8fafc;
        font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
        padding: 2rem;
        text-align: center;
      ">
        <h1 style="font-size: 2rem; color: #1e293b; margin-bottom: 1rem;">Tour & Business in China</h1>
        <p style="font-size: 1.125rem; color: #64748b; margin-bottom: 2rem;">
          Professional ground services for international visitors to China
        </p>
        <p style="color: #94a3b8; margin-bottom: 1rem;">
          JavaScript is disabled in your browser. Please enable it to view the full website.
        </p>
        <address style="color: #64748b;">
          Contact: info@beijinggroundservices.com
        </address>
      </div>
    </noscript>
  </body>
</html>
